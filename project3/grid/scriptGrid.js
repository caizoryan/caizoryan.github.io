const root = [
  //Omama
  {
    file: "videos/01OMPE.mp4",
    tag: "people",
    question: "Why Do you love conversation, Opening",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/02OMCO.mp4",
    tag: "connection",
    question:
      "Do you think conversation is an integral part to build a connection?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/03OMLA.mp4",
    tag: "language",
    question: "What contributes to having a long engaging conversation?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/04OMCH.mp4",
    tag: "change",
    question:
      "Do you think you can build a connection through conversation with a pet/animal?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/05OMCO.mp4",
    tag: "connection",
    question:
      "Is being understood in conversation a necessary element to build a connection?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/06OMDE2.mp4",
    tag: "debate",
    question: "Can debates help in building a connection?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/06OMDE2.mp4",
    tag: "open-minded",
    question: "Can debates help in building a connection?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/11OMCU.mp4",
    tag: "culture",
    question:
      "What was the longest conversation you had and what do you think contributed to it being that long?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/13OMBAD.mp4",
    tag: "bad conversation",
    question:
      "Is having an open mind important to have an engaging conversation?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/13OMBAD.mp4",
    tag: "open-minded",
    question:
      "Is having an open mind important to have an engaging conversation?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/14OMPE.mp4",
    tag: "people",
    question: "What contributes to having a long engaging conversation?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/15OMOP.mp4",
    tag: "open-minded",
    question: "What contributes to having a long engaging conversation?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/16OMEM.mp4",
    tag: "empathy",
    question:
      "What is the most important factor to make sure the other person has understood what you were saying in a conversation?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/18OMPE.mp4",
    tag: "people",
    question: "What contributes to having a long engaging conversation?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/18OMPE.mp4",
    tag: "empathy",
    question: "What contributes to having a long engaging conversation?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/19OMLA.mp4",
    tag: "language",
    question: "Is language the most efficient way to engage in conversation?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/20OMART.mp4",
    tag: "art",
    question:
      "Is language more ambiguous or art and design as a means of communication?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/21OMLA.mp4",
    tag: "language",
    question: "Is language the most efficient way to engage in conversation?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/22OMLAART.mp4",
    tag: "language",
    question:
      "Is language more ambiguous or art and design as a means of communication?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/22OMLAART.mp4",
    tag: "art",
    question:
      "Is language more ambiguous or art and design as a means of communication?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/23OMART.mp4",
    tag: "art",
    question:
      "Do you think design/art (film, music, posters, websites, etc) are a form of conversation?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/24OMLAART.mp4",
    tag: "art",
    question:
      "Do you think design/art (film, music, posters, websites, etc) are a form of conversation?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/24OMLAART.mp4",
    tag: "language",
    question: "What contributes to having a long engaging conversation?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/25OMEM.mp4",
    tag: "empathy",
    question:
      "In your conversations, when do you feel that you have been understood?",
    person: "o",
    index: 0,
    visited: false,
  },

  {
    file: "videos/26OMTH.mp4",
    tag: "thinking",
    question:
      "Do you feel your thoughts and ideas changing when you are conversing with someone?",
    person: "o",
    index: 0,
    visited: false,
  },
  {
    file: "videos/27OMCON.mp4",
    tag: "people",
    question:
      "Is there anything else that you would like to add about why do you love conversation?",
    person: "o",
    index: 0,
    visited: false,
  },

  {
    file: "videos/01AMDE.mp4",
    tag: "debate",
    question: "Why do you love conversation?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/02AMBAD.mp4",
    tag: "bad conversation",
    question: "Why do you love conversation?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/03AMPE.mp4",
    tag: "people",
    question:
      "Think of the longest conversation youâ€™ve had, what about it specifically allowed you to or made you want to talk for that long? ",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/04AMCU.mp4",
    tag: "culture",
    question:
      "What is the most important factor to have a long engaging conversation?",
    person: "a",
    index: 0,
    visited: false,
  },

  {
    file: "videos/05AMCH.mp4",
    tag: "change",
    question:
      "Do you think it is important to have a good subject of conversation or is it irrelevant?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/06AMPE.mp4",
    tag: "people",
    question:
      "Do you think it is important to have a good subject of conversation or is it irrelevant?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/07AMTHDEOP.mp4",
    tag: "thinking",
    question:
      "Do you think it is important to have a good subject of conversation or is it irrelevant?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/07AMTHDEOP.mp4",
    tag: "debate",
    question:
      "Do you think it is important to have a good subject of conversation or is it irrelevant?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/07AMTHDEOP.mp4",
    tag: "open-minded",
    question:
      "Do you think it is important to have a good subject of conversation or is it irrelevant?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/10AMCU.mp4",
    tag: "culture",
    question:
      "Do you think it is important to have a good subject of conversation or is it irrelevant?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/11AMLA.mp4",
    tag: "language",
    question:
      "Do you think exchanging words is the most optimal way of conversing?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/12AMLACU.mp4",
    tag: "language",
    question:
      "Do you think exchanging words is the most optimal way of conversing?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/12AMLACU.mp4",
    tag: "culture",
    question:
      "Do you think exchanging words is the most optimal way of conversing?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/14AMLA.mp4",
    tag: "language",
    question:
      "Do you think exchanging words is the most optimal way of conversing?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/15AMART.mp4",
    tag: "art",
    question:
      "Do you think exchanging words is the most effective way of conversing?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/18AMEM.mp4",
    tag: "empathy",
    question:
      "In your conversations, when do you feel that you have been understood?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/19AMEM.mp4",
    tag: "empathy",
    question:
      "In your conversations, when do you feel that you have been understood?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/20AMEM.mp4",
    tag: "empathy",
    question:
      "What is the most important factor to make sure the other person has understood what you had to say?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/21AMTH.mp4",
    tag: "thinking",
    question:
      "Do you feel your thoughts and ideas changing when you are conversing with someone?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/21AMTH.mp4",
    tag: "tangent?",
    question:
      "Do you feel your thoughts and ideas changing when you are conversing with someone?",
    person: "a",
    index: 0,
    visited: false,
  },
  {
    file: "videos/22AMCON.mp4",
    tag: "connection",
    question:
      "Is there anything else you would like to add about why you love conversation?",
    person: "a",
    index: 0,
    visited: false,
  },

  // sophia
  {
    file: "videos/01SOOPEN.mp4",
    tag: "connection",
    question: "Why do you love conversation?",
    person: "s",
    index: 0,
    visited: false,
  },
  {
    file: "videos/02SOEM.mp4",
    tag: "empathy",
    question: "What contributes to having a long engaging conversation?",
    person: "s",
    index: 0,
    visited: false,
  },
  {
    file: "videos/02SOEM.mp4",
    tag: "tangent?",
    question: "What contributes to having a long engaging conversation?",
    person: "s",
    index: 0,
    visited: false,
  },
  {
    file: "videos/03SOTH.mp4",
    tag: "thinking",
    question:
      "Is critical thinking necessary to have an engaging conversation?",
    person: "s",
    index: 0,
    visited: false,
  },
  {
    file: "videos/04SOEM.mp4",
    tag: "empathy",
    question:
      "Is critical thinking necessary to have an engaging conversation?",
    person: "s",
    index: 0,
    visited: false,
  },
  {
    file: "videos/05SOTH.mp4",
    tag: "thinking",
    question:
      "Is empathy the most important factor to have an engaging conversation?",
    person: "s",
    index: 0,
    visited: false,
  },
  {
    file: "videos/06SOEM.mp4",
    tag: "empathy",
    question:
      "Is empathy the most important factor to have an engaging conversation?",
    person: "s",
    index: 0,
    visited: false,
  },
  {
    file: "videos/07SOART.mp4",
    tag: "art",
    question: "Is art and design a form of conversation?",
    person: "s",
    index: 0,
    visited: false,
  },
  {
    file: "videos/08SOLAART.mp4",
    tag: "language",
    question:
      "Is art and design more ambiguous as a form of conversation than language?",
    person: "s",
    index: 0,
    visited: false,
  },
  {
    file: "videos/09SOART.mp4",
    tag: "language",
    question:
      "Is art and design more ambiguous as a form of conversation than language?",
    person: "s",
    index: 0,
    visited: false,
  },
  {
    file: "videos/10SOEM.mp4",
    tag: "empathy",
    question:
      "In your conversations, when do you feel like you have been understood by the person you are conversing with?",
    person: "s",
    index: 0,
    visited: false,
  },
  {
    file: "videos/11SOTH.mp4",
    tag: "thinking",
    question:
      "Do you feel your thoughts and ideas change while you are in a conversation with someone?",
    person: "s",
    index: 0,
    visited: false,
  },
  {
    file: "videos/12SOCON.mp4",
    tag: "connection",
    question:
      "Is there anything else you would like to add about why you love conversation?",
    person: "s",
    index: 0,
    visited: false,
  },
];

let data = [];
for (const x of root) data.push(x);

const people = ["Room 642", "Gerrard St E", "Krispy Kreme"];

const placeholderList = [
  "videos/p1.mp4",
  "videos/p2.mp4",
  "videos/p3.mp4",
  "videos/p4.mp4",
];

let currentIndex;

var audio = new Audio("../click.mp3");

let files = [];
let players = [];
let container = document.querySelector(".grid");
let items = "";
let tags = [];

for (let i = 0; i < data.length; i++) {
  data[i].index = i;
}

// make the buttons
let btnsTags = [];
function makeButtons() {
  for (const x of data) if (!tags.includes(x.tag)) tags.push(x.tag);
  for (let i = 0; i < tags.length; i++) {
    btnsTags.push(document.createElement("p"));
    btnsTags[i].innerHTML = tags[i];
    btnsTags[i].classList.add("button-class");
    btnsTags[i].addEventListener("mouseover", () => {
      for (let r = 0; r < data.length; r++) {
        document.querySelector(`#my-video${r}`).style.opacity = 0.1;
        document.querySelector(`#my-video${r}`).style.zIndex = -10;
        videojs(`my-video${r}`).muted(true);
        setTimeout(() => {
          videojs(`my-video${r}`).playbackRate(1);
        }, 100);
        soundMake();
      }

      for (let r = 0; r < data.length; r++) {
        if (data[r].tag == tags[i]) {
          document.querySelector(`#my-video${r}`).style.opacity = 1;
          document.querySelector(`#my-video${r}`).style.zIndex = 10;
          videojs(`my-video${r}`).muted(false);
          videojs(`my-video${r}`).volume(0.4);
        }
      }
    });
    document.querySelector(".tags").appendChild(btnsTags[i]);
  }
}

let btnsPeople = [];
function peopleButtons() {
  for (let i = 0; i < people.length; i++) {
    btnsPeople.push(document.createElement("p"));
    btnsPeople[i].innerHTML = people[i];
    btnsPeople[i].classList.add("button-class");
    btnsPeople[i].addEventListener("click", () => {
      switchPeople(people[i]);
    });
    document.querySelector(".people").appendChild(btnsPeople[i]);
  }
}

function switchPeople(person) {
  var ele = document.getElementsByClassName("box");
  for (var i = 0; i < ele.length; i++) {
    ele[i].style.width = "25vw";
  }

  for (let i = 0; i < data.length; i++) {
    document.querySelector(`#my-video${i}`).style.opacity = 1;
    document.querySelector(`#my-video${i}`).style.zIndex = 1;
    videojs(`my-video${i}`).muted(true);
    videojs(`my-video${i}`).src({ type: "video/mp4", src: "videos/p5.mp4" });
    videojs(`my-video${i}`).currentTime(Math.random() * 2);
  }
  data = [];

  //amir
  if (person === people[0]) {
    for (let i = 0; i < root.length; i++) {
      if (root[i].person === "a") {
        data.push(root[i]);
      }
    }
  }
  //omama
  else if (person === people[1]) {
    for (let i = 0; i < root.length; i++) {
      if (root[i].person === "o") data.push(root[i]);
    }
  }
  //sophia
  else if (person === people[2]) {
    for (let i = 0; i < root.length; i++) {
      if (root[i].person === "s") data.push(root[i]);
    }
  }
  items = "";

  for (let i = 0; i < data.length; i++) {
    videojs(`my-video${i}`).src({ type: "video/mp4", src: data[i].file });
  }
}

function filterVideos(setTag) {
  for (let i = 0; i < data.length; i++) {
    if (data[i].tag == setTag)
      document.querySelector(`.my-video${i}`).style.opacity = 0.3;
  }
}

function createVideos() {
  for (let i = 0; i < data.length; i++) {
    items += `<div class="box" href="../index.html">
    <video
    onmouseover="mouseHover(${i})"
    onmouseout="mouseExit(${i})"
    onclick="clicked(${i})"
    id="my-video${i}"
    class="video-js"
    loop muted
    preload="auto"
    autoplay="true"
    fluid="true"
    src="${data[i].file}"
    data-setup="{}"
    ></video>
    </div>`;
    setTimeout(() => {
      videojs(`my-video${i}`).playbackRate(2);
    }, 100);
  }
  container.innerHTML = items;
}

function mouseHover(index) {
  for (let r = 0; r < data.length; r++) {
    videojs(`my-video${r}`).muted(true);
  }
  videojs(`my-video${index}`).muted(false);
  document.querySelector(`#my-video${index}`).style.scale = 1.1;
  document.querySelector(`#my-video${index}`).style.zIndex = 100;
  setTimeout(() => {
    videojs(`my-video${index}`).playbackRate(1);
  }, 100);
  soundMake();
}

function mouseExit(index) {
  videojs(`my-video${index}`).muted(true);
  document.querySelector(`#my-video${index}`).style.scale = 1;
  document.querySelector(`#my-video${index}`).style.zIndex = 1;
  setTimeout(() => {
    videojs(`my-video${index}`).playbackRate(2);
  }, 100);
}

function clicked(index) {
  localStorage.setItem("currentIndex", data[index].index);
  location.href = "../index.html";
}

function shuffleArray(array) {
  for (var i = array.length - 1; i > 0; i--) {
    var j = Math.floor(Math.random() * (i + 1));
    var temp = array[i];
    array[i] = array[j];
    array[j] = temp;
  }
}

function soundMake() {
  audio.play();
}

function reset() {
  var ele = document.getElementsByClassName("box");
  data = [];
  for (const x of root) data.push(x);
  shuffleArray(data);
  for (var i = 0; i < ele.length; i++) {
    ele[i].style.width = "20vw";
  }

  for (let i = 0; i < data.length; i++) {
    document.querySelector(`#my-video${i}`).style.opacity = 1;
    document.querySelector(`#my-video${i}`).style.zIndex = 1;
    videojs(`my-video${i}`).muted(true);
    videojs(`my-video${i}`).src({ type: "video/mp4", src: data[i].file });
    setTimeout(() => {
      videojs(`my-video${i}`).playbackRate(2);
    }, 100);
  }
}

function placeholderVideo() {
  return placeholderList[Math.floor(Math.random() * placeholderList.length)];
}

makeButtons();
peopleButtons();
shuffleArray(data);
createVideos();
